<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FE Installation Project Scheduler</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: Arial, Helvetica, sans-serif; background: #ff0000; min-height: 100vh; padding: 20px; }
    .container { max-width: 1400px; margin: 0 auto; background: rgba(255, 255, 255, 0.95); border-radius: 20px; padding: 30px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); }
    h1 { color: #ff0000; margin-bottom: 30px; text-align: center; font-size: 2.5em; }
    .tabs { display: flex; gap: 10px; margin-bottom: 30px; border-bottom: 2px solid #e0e0e0; }
    .tab { padding: 12px 24px; background: none; border: none; cursor: pointer; font-size: 16px; color: #666; transition: all 0.3s; border-bottom: 3px solid transparent; margin-bottom: -2px; }
    .tab.active { color: #ff0000; border-bottom-color: #ff0000; font-weight: 600; }
    .section { display: none; animation: fadeIn 0.5s; }
    .section.active { display: block; }
    @keyframes fadeIn { from {opacity:0; transform:translateY(10px);} to {opacity:1; transform:translateY(0);} }
    .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 20px; }
    .form-group { display: flex; flex-direction: column; }
    label { font-weight: 600; color: #555; margin-bottom: 8px; font-size: 14px; }
    input, select, textarea { padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 15px; transition: all 0.3s; }
    input:focus, select:focus, textarea:focus { outline: none; border-color: #ff0000; box-shadow: 0 0 0 3px rgba(255, 0, 0, 0.1); }
    textarea { resize: vertical; min-height: 100px; }
    .btn { padding: 12px 24px; background: linear-gradient(135deg, #ff0000, #b30000); color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; font-weight: 600; transition: all 0.3s; box-shadow: 0 4px 15px rgba(255, 0, 0, 0.3); }
    .btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(255, 0, 0, 0.4); }
    .btn-danger { background: #dc3545; box-shadow: 0 4px 15px rgba(220, 53, 69, 0.3); }
    .card { background: white; border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); }
    .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 2px solid #f0f0f0; }
    .card-title { font-size: 18px; font-weight: 600; color: #333; }
    .list-container { max-height: 500px; overflow-y: auto; }
    .schedule-output { background: #f8f9fa; border-radius: 12px; padding: 20px; margin-top: 20px; min-height: 200px; }
    .schedule-day { background: white; border-radius: 8px; padding: 15px; margin-bottom: 15px; border-left: 4px solid #ff0000; }
    .schedule-day h4 { color: #ff0000; margin-bottom: 10px; }
    .assignment { background: #fff0f0; padding: 10px; border-radius: 6px; margin-bottom: 8px; }
    .tech-tag { display: inline-block; background: #ff0000; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px; margin-right: 5px; }
    .location-tag { display: inline-block; background: #b30000; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px; }
    .scope-types { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px; }
    .scope-type-card { background: #f8f9fa; padding: 15px; border-radius: 8px; border: 2px solid #e0e0e0; }
    .scope-type-card h5 { color: #ff0000; margin-bottom: 10px; }
    .metrics { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 20px; }
    .metric-card { background: linear-gradient(135deg, #ff0000, #b30000); color: white; padding: 20px; border-radius: 12px; text-align: center; }
    .metric-value { font-size: 32px; font-weight: bold; margin-bottom: 5px; }
    .metric-label { font-size: 14px; opacity: 0.9; }
    .error { background: #fee; color: #c33; padding: 10px; border-radius: 6px; margin-top: 10px; }
  </style>
  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places"></script>
</head>
<body>
  <div class="container">
    <h1>FE Installation Project Scheduler</h1>
    <div class="tabs">
      <button class="tab active" data-tab="technicians">Technicians</button>
      <button class="tab" data-tab="locations">Locations</button>
      <button class="tab" data-tab="scopes">Scope Templates</button>
      <button class="tab" data-tab="schedule">Generate Schedule</button>
    </div>

    <!-- âœ… Technicians Section -->
    <div id="technicians" class="section active">
      <div class="card">
        <div class="card-header"><h3 class="card-title">Add Technician Team</h3></div>
        <div class="form-grid">
          <div class="form-group"><label>Base Location</label><input type="text" id="techLocation" placeholder="e.g., Downtown Hub"></div>
          <div class="form-group"><label for="techAddress">Technician Address</label><input type="text" id="techAddress" autocomplete="off" style="width:100%;"></div>
          <div class="form-group"><label>Number of Technicians</label><input type="number" id="techCount" min="1" value="1"></div>
          <div class="form-group"><label>Team Name/ID</label><input type="text" id="techTeamName" placeholder="e.g., Team Alpha"></div>
          <div class="form-group"><label>Availability (Days)</label>
            <select id="techDays" multiple style="height:100px;">
              <option value="Monday" selected>Monday</option><option value="Tuesday" selected>Tuesday</option>
              <option value="Wednesday" selected>Wednesday</option><option value="Thursday" selected>Thursday</option>
              <option value="Friday" selected>Friday</option><option value="Saturday">Saturday</option><option value="Sunday">Sunday</option>
            </select>
          </div>
          <div class="form-group"><label>Working Hours</label><div style="display:flex;gap:10px;"><input type="time" id="techStartTime" value="08:00"><input type="time" id="techEndTime" value="17:00"></div></div>
          <div class="form-group"><label>Specializations</label><input type="text" id="techSpecializations" placeholder="e.g., VG, DC, PA"></div>
        </div>
        <button class="btn" onclick="addTechnician()">Add Technician Team</button>
      </div>
      <div class="card">
        <div class="card-header"><h3 class="card-title">Current Technician Teams</h3></div>
        <div id="technicianList" class="list-container"></div>
      </div>
    </div>

    <!-- âœ… Locations Section -->
    <div id="locations" class="section">
      <div class="card">
        <div class="card-header"><h3 class="card-title">Add Installation Location</h3></div>
        <div class="form-grid">
          <div class="form-group"><label>Site ID</label><input type="text" id="locationId"></div>
          <div class="form-group"><label>Site Name</label><input type="text" id="locationName"></div>
          <div class="form-group"><label for="locationAddress">Full Address</label><input type="text" id="locationAddress" autocomplete="off" style="width:100%;"></div>
          <div class="form-group"><label>Scope of Work</label><input type="text" id="locationScope"></div>
          <div class="form-group"><label>Priority</label><select id="locationPriority"><option value="High">High</option><option value="Medium" selected>Medium</option><option value="Low">Low</option></select></div>
          <div class="form-group"><label>Availability</label><input type="text" id="locationAvailability"></div>
          <div class="form-group"><label>Contact Person</label><input type="text" id="locationContact"></div>
          <div class="form-group"><label>Special Requirements</label><textarea id="locationNotes"></textarea></div>
        </div>
        <button class="btn" onclick="addLocation()">Add Location</button>
      </div>
      <div class="card"><div class="card-header"><h3 class="card-title">Current Locations</h3></div><div id="locationList" class="list-container"></div></div>
    </div>

    <!-- âœ… Scopes Section -->
    <div id="scopes" class="section">
      <div class="card"><div class="card-header"><h3 class="card-title">Define Scope Templates</h3></div>
        <div class="form-grid">
          <div class="form-group"><label>Scope Type</label><input type="text" id="scopeType"></div>
          <div class="form-group"><label>Duration per Unit (minutes)</label><input type="number" id="scopeDuration" min="1"></div>
          <div class="form-group"><label>Required Tech Count</label><input type="number" id="scopeTechCount" min="1" value="1"></div>
          <div class="form-group"><label>Complexity Factor</label><select id="scopeComplexity"><option value="1">Simple</option><option value="1.5">Moderate</option><option value="2">Complex</option></select></div>
        </div>
        <button class="btn" onclick="addScope()">Add Scope Template</button>
      </div>
      <div class="card"><div class="card-header"><h3 class="card-title">Current Scope Templates</h3></div><div id="scopeList" class="scope-types"></div></div>
    </div>

    <!-- âœ… Schedule Section -->
    <div id="schedule" class="section">
      <div class="card">
        <div class="card-header"><h3 class="card-title">Schedule Parameters</h3></div>
        <div class="form-grid">
          <div class="form-group"><label>Average Drive Time (minutes)</label><input type="number" id="driveTime" value="30"></div>
          <div class="form-group"><label>Buffer Time (minutes)</label><input type="number" id="bufferTime" value="15"></div>
          <div class="form-group"><label>Optimization Strategy</label><select id="optimizationStrategy"><option value="efficiency">Efficiency</option><option value="priority">Priority First</option><option value="balanced">Balanced</option></select></div>
        </div>
        <button class="btn" onclick="generateSchedule()">ðŸš€ Generate Optimal Schedule</button>
      </div>
      <div class="metrics" id="metrics"></div>
      <div class="schedule-output" id="scheduleOutput"><h3>Generated Schedule will appear here...</h3></div>
    </div>
  </div>

  <script>
    /* ---------- GOOGLE AUTOCOMPLETE ---------- */
    function attachAutocomplete(inputId) {
      const input = document.getElementById(inputId);
      if (!input) return;
      if (input._autocomplete) { input._autocomplete.unbindAll(); input._autocomplete = null; }
      const autocomplete = new google.maps.places.Autocomplete(input, { types: ['geocode'] });
      input._autocomplete = autocomplete;
      autocomplete.addListener('place_changed', () => {
        const place = autocomplete.getPlace();
        if (place && place.formatted_address) input.value = place.formatted_address;
      });
    }

    /* ---------- TAB SWITCHING ---------- */
    document.querySelectorAll('.tab').forEach(btn => {
      btn.addEventListener('click', e => {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        e.target.classList.add('active');
        document.getElementById(e.target.dataset.tab).classList.add('active');
        setTimeout(() => { attachAutocomplete('techAddress'); attachAutocomplete('locationAddress'); }, 100);
      });
    });

    /* ---------- DATA STORAGE ---------- */
    let technicians = [], locations = [], scopes = [];
    let currentLocationScopes = [];

    /* ---------- TECHNICIANS ---------- */
    function addTechnician() {
      const location = document.getElementById('techLocation').value.trim();
      const address = document.getElementById('techAddress').value.trim();
      const count = parseInt(document.getElementById('techCount').value);
      const teamName = document.getElementById('techTeamName').value.trim();
      const days = Array.from(document.getElementById('techDays').selectedOptions).map(o => o.value);
      const startTime = document.getElementById('techStartTime').value;
      const endTime = document.getElementById('techEndTime').value;
      const specializations = document.getElementById('techSpecializations').value.split(',').map(s => s.trim()).filter(Boolean);
      if (!location || !count || !teamName) { alert('Fill all required fields'); return; }
      technicians.push({ id: Date.now(), location, address, count, teamName, days, startTime, endTime, specializations });
      updateTechnicianList(); clearTechForm();
    }
    function clearTechForm() {
      document.getElementById('techLocation').value=''; document.getElementById('techAddress').value='';
      document.getElementById('techCount').value='1'; document.getElementById('techTeamName').value='';
      document.getElementById('techSpecializations').value=''; document.getElementById('techStartTime').value='08:00'; document.getElementById('techEndTime').value='17:00';
      const techDays=document.getElementById('techDays'); for(let o of techDays.options) o.selected=false;
      ['Monday','Tuesday','Wednesday','Thursday','Friday'].forEach(d=>{ const opt=Array.from(techDays.options).find(o=>o.value===d); if(opt) opt.selected=true; });
    }
    function updateTechnicianList() {
      const list=document.getElementById('technicianList');
      if(technicians.length===0){ list.innerHTML='<p style="color:#888;">No technician teams added yet.</p>'; return; }
      list.innerHTML=technicians.map(tech=>`
        <div class="card"><div class="card-header"><strong>${tech.teamName}</strong><button class="btn btn-danger" onclick="removeTechnician(${tech.id})">Remove</button></div>
        <p><strong>Location:</strong> ${tech.location}</p><p><strong>Address:</strong> ${tech.address||'-'}</p><p><strong>Team Size:</strong> ${tech.count}</p>
        <p><strong>Available:</strong> ${tech.days.join(', ')}</p><p><strong>Hours:</strong> ${tech.startTime} - ${tech.endTime}</p><p><strong>Specializations:</strong> ${tech.specializations.join(', ')||'All'}</p></div>`).join('');
    }
    function removeTechnician(id){ technicians=technicians.filter(t=>t.id!==id); updateTechnicianList(); }

    /* ---------- LOCATIONS ---------- */
    function addLocation() {
      const siteId=document.getElementById('locationId').value.trim();
      const name=document.getElementById('locationName').value.trim();
      const address=document.getElementById('locationAddress').value.trim();
      const scope=document.getElementById('locationScope').value.trim();
      const priority=document.getElementById('locationPriority').value;
